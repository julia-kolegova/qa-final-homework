| ID         | Название                                                                  | Цель                                                                                                                                    | Предусловия                                                                                                                            | Тестовые данные                                                                                         | Шаги                                                                                                                                                                                                                                                                                                                       | Ожидаемый результат                                                                                                                                                      | Баг, который ловится                                                                       |
| ---------- | ------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------ |
| **TC-001** | Пересчёт комиссии при изменении суммы после успешного перевода            | Убедиться, что поле «Комиссия» динамически пересчитывается при каждом новом вводе суммы                                                 | *Открыта страница перевода;* выбран рублёвый счёт с балансом ≥ 10 000 ₽; ранее **выполнен успешный перевод** на 5 000 ₽                | Номер карты: `5559 0000 0000 0000` (валидный)<br>Сумма 1: **5 000 ₽**<br>Сумма 2: **1 000 ₽**           | 1. Ввести № карты.<br>2. Ввести **5 000 ₽**, проверить отображаемую комиссию.<br>3. Нажать **«Перевести»** — убедиться, что перевод выполнен.<br>4. Не перезагружая страницу, изменить сумму на **1 000 ₽**.<br>5. Наблюдать поле «Комиссия».                                                                              | Комиссия **автоматически** пересчитывается под новую сумму (для 1 000 ₽ при 10 % комиссия = 100 ₽).                                                                      | **BUG-01**: Комиссия остаётся прежней после первого перевода и не обновляется              |
| **TC-002** | Корректность суммы в сообщении о успешном переводе                        | Проверить, что pop-up / toast-сообщение отражает актуальное значение суммы **и** комиссии                                               | Открыта страница; выбран рублёвый счёт с балансом ≥ 2 000 ₽                                                                            | Номер карты: `4111 1111 1111 1111`<br>Сумма: **1 000 ₽**                                                | 1. Ввести № карты.<br>2. Ввести **1 000 ₽**.<br>3. Нажать **«Перевести»**.<br>4. Зафиксировать текст уведомления об успешном переводе.                                                                                                                                                                                     | Сообщение в формате: «Перевод **1 000 ₽ (+ комиссия 100 ₽)** успешно отправлен».                                                                                         | **BUG-02**: В сообщении отображается предыдущая (некорректная) сумма                       |
| **TC-003** | Валидация «Недостаточно средств», когда сумма + комиссия превышает баланс | Проверить, что пользователь не может отправить перевод больше доступного остатка                                                        | Выбран **долларовый** счёт; на счету: 100 \$; резерв = 0                                                                               | Номер карты: `4000 1234 5678 9000`<br>Сумма: **3 111 \$** (при комиссии 10 % итог = 3 421 \$  > 100 \$) | 1. Выбрать счёт «Доллары».<br>2. Ввести № карты.<br>3. Ввести **3 111 \$**.<br>4. Нажать **«Перевести»**.                                                                                                                                                                                                                  | Появляется сообщение об ошибке: «Недостаточно средств для перевода»; кнопка **становится неактивной**.                                                                   | **BUG-03**: Ошибка не отображается, кнопка остаётся активной                               |
| **TC-004** | Корректная формула комиссии для **малых сумм** (floor)                    | Проверить округление вниз комиссии при ставке 10 %                                                                                      | Открыта страница; выбран рублёвый счёт, доступно ≥ 100 ₽                                                                               | Номер карты: `1234 5678 9090 1122`<br>Сумма: **99 ₽**                                                   | 1. Ввести № карты.<br>2. Ввести **99 ₽**.<br>3. Посмотреть поле «Комиссия».                                                                                                                                                                                                                                                | Комиссия рассчитывается как **floor(99 × 0,1) = 9 ₽**.                                                                                                                   | **BUG-04**: Комиссия считается неверно (дробное или округление вверх)                      |
| **TC-005** | Кросс-валютный пересчёт комиссии и доступного баланса                     | Убедиться, что при смене счёта (руб → доллары и обратно) пересчитываются: 1) комиссия, 2) доступная сумма, 3) ошибки недостатка средств | 1. Открыта страница; 2 счёта: рублёвый (баланс 30 000 ₽, резерв 2 000 ₽) и долларовый (баланс 100 \$); курс 1 \$ = 90 ₽ (фиксировать). | Шаблон:<br>— Сумма в руб: **28 000 ₽**<br>— Сумма в \$: **400 \$**                                      | 1. Выбрать рублёвый счёт, ввести **28 000 ₽**.<br>2. Проверить комиссию (должно хватить средств).<br>3. Переключиться на долларовый счёт — убедиться, что поле суммы конвертируется (≈ 311 \$) или очищается, комиссия пересчитывается.<br>4. Ввести **400 \$** (должно не хватить средств).<br>5. Нажать **«Перевести»**. | 1. После смены счёта сумма и комиссия пересчитываются по курсу, ошибки/валидации актуальны.<br>2. При 400 \$ появляется ошибка «Недостаточно средств», кнопка неактивна. | Покрывает потенциальные комбинированные ошибки пересчёта комиссии/остатка при смене валюты |
